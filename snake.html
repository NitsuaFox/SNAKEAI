<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Web Snake</title><style>body{margin:0;padding:0;display:flex;justify-content:center;align-items:center;height:100vh;background-color:#f0f0f0}#gameContainer{display:flex;flex-direction:column;align-items:center}#gameCanvas{border:2px solid #333}#controlsContainer{display:flex;justify-content:space-between;width:100%;margin-top:20px}.controlButton{width:100px;height:50px;font-size:18px}#startButton{margin-top:10px}#gameOverScreen{display:none;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background-color:rgba(0,0,0,.8);color:#fff;padding:20px;text-align:center}</style></head><body><div id="gameContainer"><canvas id="gameCanvas" width="400" height="400"></canvas><div id="controlsContainer"><button id="leftButton" class="controlButton">Left</button> <button id="rightButton" class="controlButton">Right</button></div><button id="startButton">Start Game</button></div><div id="gameOverScreen"><h2>Game Over</h2><div id="scoreDisplay"></div><div id="highScoreInput" style="display:none"><p>New High Score! Enter your initials:</p><input type="text" id="initialsInput" maxlength="3"><button id="submitScore">Submit</button></div><h3>High Scores</h3><ol id="highScoresList"></ol><button id="restartButton">Restart</button></div><script src="https://cdnjs.cloudflare.com/ajax/libs/gl-matrix/2.8.1/gl-matrix-min.js"></script><script>const canvas=document.getElementById("gameCanvas"),gl=canvas.getContext("webgl");if(!gl)alert("Unable to initialize WebGL. Your browser may not support it.");const vsSource="attribute vec4 aVertexPosition;uniform mat4 uModelViewMatrix;uniform mat4 uProjectionMatrix;void main(){gl_Position=uProjectionMatrix*uModelViewMatrix*aVertexPosition;}",fsSource="precision mediump float;uniform vec4 uColor;void main(){gl_FragColor=uColor;}";function initShaderProgram(e,t,n){const o=loadShader(e,e.VERTEX_SHADER,t),i=loadShader(e,e.FRAGMENT_SHADER,n),a=e.createProgram();return e.attachShader(a,o),e.attachShader(a,i),e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)?a:(alert("Unable to initialize the shader program: "+e.getProgramInfoLog(a)),null)}function loadShader(e,t,n){const o=e.createShader(t);return e.shaderSource(o,n),e.compileShader(o),e.getShaderParameter(o,e.COMPILE_STATUS)?o:(alert("An error occurred compiling the shaders: "+e.getShaderInfoLog(o)),e.deleteShader(o),null)}const shaderProgram=initShaderProgram(gl,vsSource,fsSource),programInfo={program:shaderProgram,attribLocations:{vertexPosition:gl.getAttribLocation(shaderProgram,"aVertexPosition")},uniformLocations:{projectionMatrix:gl.getUniformLocation(shaderProgram,"uProjectionMatrix"),modelViewMatrix:gl.getUniformLocation(shaderProgram,"uModelViewMatrix"),color:gl.getUniformLocation(shaderProgram,"uColor")}};let snake=[{x:10,y:10}],direction="right",food={x:15,y:15,type:"red"},score=0,gameRunning=!1,gridSize=20,cellSize=canvas.width/gridSize,speedBoost=!1,speedBoostTimer=0,extraFoods=[],extraFoodTimer=0;function gameLoop(){gameRunning&&(moveSnake(),checkCollision(),updateSpecialEffects(),drawScene(),setTimeout(gameLoop,speedBoost?50:100))}function moveSnake(){const e={...snake[0]};switch(direction){case"up":e.y--;break;case"down":e.y++;break;case"left":e.x--;break;case"right":e.x++}if(snake.unshift(e),e.x===food.x&&e.y===food.y)score++,handleFoodEffect(food.type),generateFood();else{let t=!1;extraFoods=extraFoods.filter(n=>{if(e.x===n.x&&e.y===n.y)return score++,t=!0,!1;return!0}),t||snake.pop()}}function handleFoodEffect(e){switch(e){case"yellow":speedBoost=!0,speedBoostTimer=50;break;case"green":spawnExtraFood(5),extraFoodTimer=100;break;case"purpleUp":changeGridResolution(2);break;case"purpleDown":changeGridResolution(-2)}}function spawnExtraFood(e){for(let t=0;t<e;t++){let e=generateRandomPosition();while(snake.some(t=>t.x===e.x&&t.y===e.y)||extraFoods.some(t=>t.x===e.x&&t.y===e.y)||food.x===e.x&&food.y===e.y)e=generateRandomPosition();extraFoods.push(e)}}function changeGridResolution(e){gridSize+=e,gridSize=Math.max(10,Math.min(30,gridSize)),cellSize=canvas.width/gridSize,snake=snake.map(t=>({x:Math.floor(t.x*gridSize/(gridSize-e)),y:Math.floor(t.y*gridSize/(gridSize-e))})),food={x:Math.floor(food.x*gridSize/(gridSize-e)),y:Math.floor(food.y*gridSize/(gridSize-e)),type:food.type},extraFoods=extraFoods.map(t=>({x:Math.floor(t.x*gridSize/(gridSize-e)),y:Math.floor(t.y*gridSize/(gridSize-e))}))}function updateSpecialEffects(){speedBoostTimer>0&&(speedBoostTimer--,0===speedBoostTimer&&(speedBoost=!1)),extraFoodTimer>0&&(extraFoodTimer--,0===extraFoodTimer&&(extraFoods=[]))}function checkCollision(){const e=snake[0];if(e.x<0||e.x>=gridSize||e.y<0||e.y>=gridSize)return void gameOver();for(let t=1;t<snake.length;t++)if(e.x===snake[t].x&&e.y===snake[t].y)return void gameOver()}function generateFood(){const e=Math.random();let t;t=e<.5?"red":e<.7?"yellow":e<.85?"green":e<.925?"purpleUp":"purpleDown",food={...generateRandomPosition(),type:t}}function generateRandomPosition(){return{x:Math.floor(Math.random()*gridSize),y:Math.floor(Math.random()*gridSize)}}function gameOver(){gameRunning=!1,document.getElementById("gameOverScreen").style.display="block",document.getElementById("scoreDisplay").textContent=`Your score: ${score}`,updateHighScores()}let highScores=[];function updateHighScores(){highScores.length<5||score>highScores[highScores.length-1].score?document.getElementById("highScoreInput").style.display="block":displayHighScores()}function submitHighScore(){const e=document.getElementById("initialsInput").value.toUpperCase();highScores.push({initials:e,score}),highScores.sort((e,t)=>t.score-e.score),highScores.length>5&&highScores.pop(),displayHighScores(),document.getElementById("highScoreInput").style.display="none"}function displayHighScores(){const e=document.getElementById("highScoresList");e.innerHTML="",highScores.forEach(t=>{const n=document.createElement("li");n.textContent=`${t.initials}: ${t.score}`,e.appendChild(n)})}function drawScene(){gl.clearColor(0,0,0,1),gl.clear(gl.COLOR_BUFFER_BIT);const e=mat4.create();mat4.ortho(e,0,canvas.width,canvas.height,0,-1,1);const t=mat4.create();gl.useProgram(programInfo.program),gl.uniformMatrix4fv(programInfo.uniformLocations.projectionMatrix,!1,e),gl.uniformMatrix4fv(programInfo.uniformLocations.modelViewMatrix,!1,t),snake.forEach((e,t)=>{const n=0===t?[0,1,0,1]:[0,.8,0,1];drawSquare(e.x*cellSize,e.y*cellSize,cellSize,n)});const n=getFoodColor(food.type);drawSquare(food.x*cellSize,food.y*cellSize,cellSize,n,food.type),extraFoods.forEach(e=>{drawSquare(e.x*cellSize,e.y*cellSize,cellSize,[1,0,0,1])})}function getFoodColor(e){switch(e){case"red":return[1,0,0,1];case"yellow":return[1,1,0,1];case"green":return[0,1,0,1];case"purpleUp":case"purpleDown":return[.5,0,.5,1];default:return[1,1,1,1]}}function drawSquare(e,t,n,o,i){const a=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,a);const r=[e,t,e+n,t,e,t+n,e+n,t+n];if(gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(r),gl.STATIC_DRAW),gl.vertexAttribPointer(programInfo.attribLocations.vertexPosition,2,gl.FLOAT,!1,0,0),gl.enableVertexAttribArray(programInfo.attribLocations.vertexPosition),gl.uniform4fv(programInfo.uniformLocations.color,o),gl.drawArrays(gl.TRIANGLE_STRIP,0,4),"purpleUp"===i||"purpleDown"===i){gl.uniform4fv(programInfo.uniformLocations.color,[1,1,1,1]);const o=n/5,a=e+n/2,r=t+n/2,s=[];if("purpleUp"===i){s.push(a-o,r-o,a+o,r-o,a,r+o)}else{s.push(a-o,r,a+o,r)}gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(s),gl.STATIC_DRAW),gl.vertexAttribPointer(programInfo.attribLocations.vertexPosition,2,gl.FLOAT,!1,0,0),gl.drawArrays(gl.TRIANGLES,0,3)}}function turnLeft(){switch(direction){case"up":direction="left";break;case"down":direction="right";break;case"left":direction="down";break;case"right":direction="up"}}function turnRight(){switch(direction){case"up":direction="right";break;case"down":direction="left";break;case"left":direction="up";break;case"right":direction="down"}}function startGame(){snake=[{x:10,y:10}],direction="right",score=0,speedBoost=!1,speedBoostTimer=0,extraFoods=[],extraFoodTimer=0,gridSize=20,cellSize=canvas.width/gridSize,generateFood(),gameRunning=!0,document.getElementById("gameOverScreen").style.display="none",gameLoop()}document.getElementById("leftButton").addEventListener("mousedown",turnLeft),document.getElementById("leftButton").addEventListener("touchstart",turnLeft),document.getElementById("rightButton").addEventListener("mousedown",turnRight),document.getElementById("rightButton").addEventListener("touchstart",turnRight),document.getElementById("startButton").addEventListener("click",startGame),document.getElementById("restartButton").addEventListener("click",startGame),document.getElementById("submitScore").addEventListener("click",submitHighScore),drawScene();</script></body></html>
